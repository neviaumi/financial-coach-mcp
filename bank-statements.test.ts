import { fromTransactions } from "./bank-statements.ts";
import { assertEquals, assertExists } from "@std/assert";
const mockTransactions = [
  {
    "bookingDate": "2025-06-02",
    "valueDate": "2025-05-31",
    "bookingDateTime": "2025-06-02T01:00:00+01:00",
    "valueDateTime": "2025-05-31T00:37:39.580+01:00",
    "transactionAmount": {
      "amount": "0.01",
      "currency": "GBP",
    },
    "remittanceInformationUnstructured":
      "INTEREST PAID GROSS  FOR PERIOD 1MAY/ 1JUN",
    "internalTransactionId": "4cac8c6808cfa13857f1475884f8fd5c",
    "bank": "BARCLAYS_BUKBGB22",
    "accountNumber": "43018717",
    "accountType": "Saving",
  },
  {
    "bookingDate": "2025-06-30",
    "bookingDateTime": "2025-06-30T20:49:38Z",
    "transactionAmount": {
      "amount": "-26.39",
      "currency": "GBP",
    },
    "creditorName": "B&Q MARKETPLACE",
    "remittanceInformationUnstructured": "B&Q Marketplace, Eastleigh",
    "merchantCategoryCode": "5211",
    "internalTransactionId": "3cdec3bcf13697c948546d07cc255550",
    "bank": "BARCLAYS_BUKBGB22",
    "accountNumber": "************7005",
    "accountType": "CreditCard",
  },
  {
    "bookingDate": "2025-06-30",
    "bookingDateTime": "2025-06-30T20:49:38Z",
    "transactionAmount": {
      "amount": "-1.76",
      "currency": "GBP",
    },
    "creditorName": "B & Q 1156",
    "remittanceInformationUnstructured": "B & Q 1156, Abingdon",
    "merchantCategoryCode": "5200",
    "internalTransactionId": "d3136d67265eb918bc699336b3f3052f",
    "bank": "BARCLAYS_BUKBGB22",
    "accountNumber": "************7005",
    "accountType": "CreditCard",
  },
  {
    "bookingDate": "2025-06-30",
    "bookingDateTime": "2025-06-30T20:49:38Z",
    "transactionAmount": {
      "amount": "-2.24",
      "currency": "GBP",
    },
    "creditorName": "LIDL GB ABINGDON",
    "remittanceInformationUnstructured": "Lidl GB Abingdon, Abingdon",
    "merchantCategoryCode": "5411",
    "internalTransactionId": "cd6e115f9e312abc916a0d9d2338f53d",
    "bank": "BARCLAYS_BUKBGB22",
    "accountNumber": "************7005",
    "accountType": "CreditCard",
  },
  {
    "bookingDate": "2025-06-30",
    "bookingDateTime": "2025-06-30T20:49:38Z",
    "transactionAmount": {
      "amount": "-61.00",
      "currency": "GBP",
    },
    "creditorName": "PAYPAL *ABINGDONSQU",
    "remittanceInformationUnstructured": "Paypal *abingdonsqu, 35314369001",
    "merchantCategoryCode": "7997",
    "internalTransactionId": "b10a4220016899421d46c33751c816fc",
    "bank": "BARCLAYS_BUKBGB22",
    "accountNumber": "************7005",
    "accountType": "CreditCard",
  },
  {
    "bookingDate": "2025-06-25",
    "bookingDateTime": "2025-06-25T20:19:07Z",
    "transactionAmount": {
      "amount": "-18.00",
      "currency": "GBP",
    },
    "creditorName": "MILLENNIUM DRAGON PART",
    "remittanceInformationUnstructured": "Millennium Dragon Part, Bicester",
    "merchantCategoryCode": "5812",
    "internalTransactionId": "70aaf5b5748e1e888908bbf1bf7221ac",
    "bank": "BARCLAYS_BUKBGB22",
    "accountNumber": "************7005",
    "accountType": "CreditCard",
  },
  {
    "bookingDate": "2025-06-25",
    "bookingDateTime": "2025-06-25T20:19:07Z",
    "transactionAmount": {
      "amount": "-37.79",
      "currency": "GBP",
    },
    "creditorName": "BICESTER",
    "remittanceInformationUnstructured":
      "Bicester, Bicester, 377928.26 null UNITED KINGDOM",
    "merchantCategoryCode": "5542",
    "internalTransactionId": "17150819d9e39dd94934f27eb24800da",
    "bank": "BARCLAYS_BUKBGB22",
    "accountNumber": "************7005",
    "accountType": "CreditCard",
  },
  {
    "bookingDate": "2025-06-23",
    "bookingDateTime": "2025-06-23T20:04:18Z",
    "transactionAmount": {
      "amount": "572.48",
      "currency": "GBP",
    },
    "creditorName": "PAYMENT BY DIRECT DEBIT",
    "remittanceInformationUnstructured": "Payment By Direct Debit",
    "internalTransactionId": "3301295c5658e9a6ff94fc37f915b0e8",
    "bank": "BARCLAYS_BUKBGB22",
    "accountNumber": "************7005",
    "accountType": "CreditCard",
  },
  {
    "bookingDate": "2025-06-23",
    "bookingDateTime": "2025-06-23T20:50:56Z",
    "transactionAmount": {
      "amount": "-14.98",
      "currency": "GBP",
    },
    "creditorName": "AMAZON* S642W7WJ5",
    "remittanceInformationUnstructured": "Amazon* S642w7wj5, London",
    "merchantCategoryCode": "5399",
    "internalTransactionId": "42c4479b6e5981cda67ecb3250628772",
    "bank": "BARCLAYS_BUKBGB22",
    "accountNumber": "************7005",
    "accountType": "CreditCard",
  },
  {
    "bookingDate": "2025-06-23",
    "bookingDateTime": "2025-06-23T20:50:56Z",
    "transactionAmount": {
      "amount": "-5.00",
      "currency": "GBP",
    },
    "creditorName": "T AND D HAND CAR WASH",
    "remittanceInformationUnstructured":
      "T and D Hand Car Wash, Bicester, 50028.26 null UNITED KINGDOM",
    "merchantCategoryCode": "7542",
    "internalTransactionId": "8888406c041c2fb91601abff8d0c7cd4",
    "bank": "BARCLAYS_BUKBGB22",
    "accountNumber": "************7005",
    "accountType": "CreditCard",
  },
  {
    "bookingDate": "2025-06-23",
    "bookingDateTime": "2025-06-23T20:50:56Z",
    "transactionAmount": {
      "amount": "-10.00",
      "currency": "GBP",
    },
    "creditorName": "giffgaff",
    "remittanceInformationUnstructured": "giffgaff, London",
    "merchantCategoryCode": "4814",
    "internalTransactionId": "8bddd9b66fd8c7414599035838342020",
    "bank": "BARCLAYS_BUKBGB22",
    "accountNumber": "************7005",
    "accountType": "CreditCard",
  },
  {
    "bookingDate": "2025-06-23",
    "bookingDateTime": "2025-06-23T20:50:56Z",
    "transactionAmount": {
      "amount": "-3.00",
      "currency": "GBP",
    },
    "creditorName": "THE LACOCK DAIRY LTD",
    "remittanceInformationUnstructured":
      "The Lacock Dairy Ltd, Lacock chippe, 30028.26 null UNITED KINGDOM",
    "merchantCategoryCode": "5451",
    "internalTransactionId": "6631cb28311c6e290b4117a8e728fcb9",
    "bank": "BARCLAYS_BUKBGB22",
    "accountNumber": "************7005",
    "accountType": "CreditCard",
  },
  {
    "bookingDate": "2025-06-23",
    "bookingDateTime": "2025-06-23T20:50:56Z",
    "transactionAmount": {
      "amount": "-32.39",
      "currency": "GBP",
    },
    "creditorName": "BICESTER",
    "remittanceInformationUnstructured":
      "Bicester, Bicester, 323928.26 null UNITED KINGDOM",
    "merchantCategoryCode": "5542",
    "internalTransactionId": "c42b87a660e03192570c3184667a3e82",
    "bank": "BARCLAYS_BUKBGB22",
    "accountNumber": "************7005",
    "accountType": "CreditCard",
  },
  {
    "bookingDate": "2025-06-19",
    "bookingDateTime": "2025-06-19T20:21:47Z",
    "transactionAmount": {
      "amount": "-10.89",
      "currency": "GBP",
    },
    "creditorName": "BURGER KING",
    "remittanceInformationUnstructured": "Burger King, Cowley",
    "merchantCategoryCode": "5814",
    "internalTransactionId": "a97f32fcec3b8730ea7c52555502d1ea",
    "bank": "BARCLAYS_BUKBGB22",
    "accountNumber": "************7005",
    "accountType": "CreditCard",
  },
  {
    "bookingDate": "2025-06-17",
    "bookingDateTime": "2025-06-17T20:23:18Z",
    "transactionAmount": {
      "amount": "-10.33",
      "currency": "GBP",
    },
    "creditorName": "BURGER KING",
    "remittanceInformationUnstructured": "Burger King, Cowley",
    "merchantCategoryCode": "5814",
    "internalTransactionId": "7b23b015e44bde135011767d0a358feb",
    "bank": "BARCLAYS_BUKBGB22",
    "accountNumber": "************7005",
    "accountType": "CreditCard",
  },
  {
    "bookingDate": "2025-06-17",
    "bookingDateTime": "2025-06-17T20:23:18Z",
    "transactionAmount": {
      "amount": "-2.00",
      "currency": "GBP",
    },
    "creditorName": "TESCO STORES 2994",
    "remittanceInformationUnstructured": "Tesco Stores 2994, Oxford 2",
    "merchantCategoryCode": "5411",
    "internalTransactionId": "f81f8665075cfd36adacfcc806f0a115",
    "bank": "BARCLAYS_BUKBGB22",
    "accountNumber": "************7005",
    "accountType": "CreditCard",
  },
  {
    "bookingDate": "2025-06-17",
    "bookingDateTime": "2025-06-17T20:23:18Z",
    "transactionAmount": {
      "amount": "-8.50",
      "currency": "GBP",
    },
    "creditorName": "SQ *OXFORD FACTORY CAF",
    "remittanceInformationUnstructured": "SQ *oxford Factory CAF, Oxford",
    "merchantCategoryCode": "5814",
    "internalTransactionId": "ca6f504fbd06443434a71567c93498cf",
    "bank": "BARCLAYS_BUKBGB22",
    "accountNumber": "************7005",
    "accountType": "CreditCard",
  },
  {
    "bookingDate": "2025-06-16",
    "bookingDateTime": "2025-06-16T20:51:18Z",
    "transactionAmount": {
      "amount": "-31.20",
      "currency": "GBP",
    },
    "creditorName": "COSTCO PFS",
    "remittanceInformationUnstructured": "Costco PFS, B'ham b7",
    "merchantCategoryCode": "5542",
    "internalTransactionId": "4c867b8b31ee8a73e284cbc7de0a525e",
    "bank": "BARCLAYS_BUKBGB22",
    "accountNumber": "************7005",
    "accountType": "CreditCard",
  },
  {
    "bookingDate": "2025-06-16",
    "bookingDateTime": "2025-06-16T20:51:18Z",
    "transactionAmount": {
      "amount": "-3.20",
      "currency": "GBP",
    },
    "creditorName": "NASHS BAKERY",
    "remittanceInformationUnstructured": "Nashs Bakery, Chipping nort",
    "merchantCategoryCode": "5462",
    "internalTransactionId": "7f5c438bd6c01547c5d2905751503587",
    "bank": "BARCLAYS_BUKBGB22",
    "accountNumber": "************7005",
    "accountType": "CreditCard",
  },
  {
    "bookingDate": "2025-06-13",
    "bookingDateTime": "2025-06-13T20:19:57Z",
    "transactionAmount": {
      "amount": "-0.79",
      "currency": "GBP",
    },
    "creditorName": "LIDL GB  BICESTER",
    "remittanceInformationUnstructured": "Lidl GB A/C Bicester, Bicester",
    "merchantCategoryCode": "5411",
    "internalTransactionId": "93c61013452d026283023bbfef3851ef",
    "bank": "BARCLAYS_BUKBGB22",
    "accountNumber": "************7005",
    "accountType": "CreditCard",
  },
  {
    "bookingDate": "2025-06-13",
    "bookingDateTime": "2025-06-13T20:19:57Z",
    "transactionAmount": {
      "amount": "-33.77",
      "currency": "GBP",
    },
    "creditorName": "COSTCO PFS",
    "remittanceInformationUnstructured": "Costco PFS, Reading",
    "merchantCategoryCode": "5542",
    "internalTransactionId": "e3711bf496beeb7f15e3db3d2b642a7d",
    "bank": "BARCLAYS_BUKBGB22",
    "accountNumber": "************7005",
    "accountType": "CreditCard",
  },
  {
    "bookingDate": "2025-06-12",
    "bookingDateTime": "2025-06-12T20:20:40Z",
    "transactionAmount": {
      "amount": "-67.19",
      "currency": "GBP",
    },
    "creditorName": "Costco Wholesale #114",
    "remittanceInformationUnstructured": "Costco Wholesale #114, Reading",
    "merchantCategoryCode": "7278",
    "internalTransactionId": "eddad4feaf317bed5dc1f520d2f50749",
    "bank": "BARCLAYS_BUKBGB22",
    "accountNumber": "************7005",
    "accountType": "CreditCard",
  },
  {
    "bookingDate": "2025-06-12",
    "bookingDateTime": "2025-06-12T20:20:40Z",
    "transactionAmount": {
      "amount": "-8.28",
      "currency": "GBP",
    },
    "creditorName": "Costco Wholesale #114",
    "remittanceInformationUnstructured": "Costco Wholesale #114, Reading",
    "merchantCategoryCode": "7278",
    "internalTransactionId": "b8397639d2e6c408a73241df6dbdda12",
    "bank": "BARCLAYS_BUKBGB22",
    "accountNumber": "************7005",
    "accountType": "CreditCard",
  },
  {
    "bookingDate": "2025-06-10",
    "bookingDateTime": "2025-06-10T21:58:30Z",
    "transactionAmount": {
      "amount": "-2.74",
      "currency": "GBP",
    },
    "creditorName": "TOOLSTATION UK",
    "remittanceInformationUnstructured": "Toolstation UK, Northampton",
    "merchantCategoryCode": "5251",
    "internalTransactionId": "e508a1031e39d451cae0c12b73bac662",
    "bank": "BARCLAYS_BUKBGB22",
    "accountNumber": "************7005",
    "accountType": "CreditCard",
  },
  {
    "bookingDate": "2025-06-09",
    "bookingDateTime": "2025-06-09T20:48:53Z",
    "transactionAmount": {
      "amount": "-30.46",
      "currency": "GBP",
    },
    "creditorName": "Costco Wholesale #114",
    "remittanceInformationUnstructured": "Costco Wholesale #114, Reading",
    "merchantCategoryCode": "7278",
    "internalTransactionId": "bdc91bb8b429af6f4bc5bed6d2374e79",
    "bank": "BARCLAYS_BUKBGB22",
    "accountNumber": "************7005",
    "accountType": "CreditCard",
  },
  {
    "bookingDate": "2025-06-09",
    "bookingDateTime": "2025-06-09T20:48:53Z",
    "transactionAmount": {
      "amount": "-1.99",
      "currency": "GBP",
    },
    "creditorName": "Costco Wholesale #114",
    "remittanceInformationUnstructured": "Costco Wholesale #114, Reading",
    "merchantCategoryCode": "7278",
    "internalTransactionId": "af7fd1714e904ef6267c873af5f1664b",
    "bank": "BARCLAYS_BUKBGB22",
    "accountNumber": "************7005",
    "accountType": "CreditCard",
  },
  {
    "bookingDate": "2025-06-09",
    "bookingDateTime": "2025-06-09T20:48:53Z",
    "transactionAmount": {
      "amount": "-38.45",
      "currency": "GBP",
    },
    "creditorName": "Costco Wholesale #114",
    "remittanceInformationUnstructured": "Costco Wholesale #114, Reading",
    "merchantCategoryCode": "7278",
    "internalTransactionId": "15550a7f6d901c8589a60b052622b7ad",
    "bank": "BARCLAYS_BUKBGB22",
    "accountNumber": "************7005",
    "accountType": "CreditCard",
  },
  {
    "bookingDate": "2025-06-09",
    "bookingDateTime": "2025-06-09T20:48:53Z",
    "transactionAmount": {
      "amount": "-10.69",
      "currency": "GBP",
    },
    "creditorName": "BURGER KING  BICESTER",
    "remittanceInformationUnstructured": "Burger King A/C Bicester, Bicester",
    "merchantCategoryCode": "5814",
    "internalTransactionId": "8a67e628bec1904b8dd093de7adacebf",
    "bank": "BARCLAYS_BUKBGB22",
    "accountNumber": "************7005",
    "accountType": "CreditCard",
  },
  {
    "bookingDate": "2025-06-09",
    "bookingDateTime": "2025-06-09T20:48:53Z",
    "transactionAmount": {
      "amount": "-12.49",
      "currency": "GBP",
    },
    "creditorName": "PETS AT HOME LIMITED E",
    "remittanceInformationUnstructured": "Pets at Home Limited E, Handforth",
    "merchantCategoryCode": "5995",
    "internalTransactionId": "7340e99c618456063b704374571de414",
    "bank": "BARCLAYS_BUKBGB22",
    "accountNumber": "************7005",
    "accountType": "CreditCard",
  },
  {
    "bookingDate": "2025-06-09",
    "bookingDateTime": "2025-06-09T20:48:53Z",
    "transactionAmount": {
      "amount": "-35.87",
      "currency": "GBP",
    },
    "creditorName": "BICESTER",
    "remittanceInformationUnstructured":
      "Bicester, Bicester, 358728.26 null UNITED KINGDOM",
    "merchantCategoryCode": "5542",
    "internalTransactionId": "2dbab789bb68431a7c086f19c07f7873",
    "bank": "BARCLAYS_BUKBGB22",
    "accountNumber": "************7005",
    "accountType": "CreditCard",
  },
  {
    "bookingDate": "2025-06-09",
    "bookingDateTime": "2025-06-09T20:48:53Z",
    "transactionAmount": {
      "amount": "-34.81",
      "currency": "GBP",
    },
    "creditorName": "BICESTER",
    "remittanceInformationUnstructured":
      "Bicester, Bicester, 348128.26 null UNITED KINGDOM",
    "merchantCategoryCode": "5542",
    "internalTransactionId": "7d893014f2aee89c906261167f061ac4",
    "bank": "BARCLAYS_BUKBGB22",
    "accountNumber": "************7005",
    "accountType": "CreditCard",
  },
  {
    "bookingDate": "2025-06-04",
    "bookingDateTime": "2025-06-04T20:20:38Z",
    "transactionAmount": {
      "amount": "-27.96",
      "currency": "GBP",
    },
    "creditorName": "KEBANOS",
    "remittanceInformationUnstructured": "Kebanos, Manchester",
    "merchantCategoryCode": "5812",
    "internalTransactionId": "1eff6c15f02d5d92aa0119697caa0d9e",
    "bank": "BARCLAYS_BUKBGB22",
    "accountNumber": "************7005",
    "accountType": "CreditCard",
  },
  {
    "bookingDate": "2025-06-03",
    "bookingDateTime": "2025-06-03T20:23:09Z",
    "transactionAmount": {
      "amount": "-9.90",
      "currency": "GBP",
    },
    "creditorName": "BICESTER PHARMACY",
    "remittanceInformationUnstructured": "Bicester Pharmacy, Bicester",
    "merchantCategoryCode": "5912",
    "internalTransactionId": "d75f37e1d634d2d2b0aea1b8236fad97",
    "bank": "BARCLAYS_BUKBGB22",
    "accountNumber": "************7005",
    "accountType": "CreditCard",
  },
  {
    "bookingDate": "2025-06-03",
    "bookingDateTime": "2025-06-03T20:23:09Z",
    "transactionAmount": {
      "amount": "-222.00",
      "currency": "GBP",
    },
    "creditorName": "CHERWELL DC",
    "remittanceInformationUnstructured": "Cherwell DC, Banbury",
    "merchantCategoryCode": "9399",
    "internalTransactionId": "f3de35a2e173913450fec9bf2777918c",
    "bank": "BARCLAYS_BUKBGB22",
    "accountNumber": "************7005",
    "accountType": "CreditCard",
  },
  {
    "bookingDate": "2025-06-03",
    "bookingDateTime": "2025-06-03T20:23:09Z",
    "transactionAmount": {
      "amount": "-12.80",
      "currency": "GBP",
    },
    "creditorName": "CEX",
    "remittanceInformationUnstructured": "Cex, London",
    "merchantCategoryCode": "5732",
    "internalTransactionId": "059e2bc5c89f4f5ba1f56fb8ceadcbdd",
    "bank": "BARCLAYS_BUKBGB22",
    "accountNumber": "************7005",
    "accountType": "CreditCard",
  },
  {
    "bookingDate": "2025-06-02",
    "bookingDateTime": "2025-06-02T20:49:08Z",
    "transactionAmount": {
      "amount": "-33.85",
      "currency": "GBP",
    },
    "creditorName": "LIDL GB ABINGDON",
    "remittanceInformationUnstructured": "Lidl GB Abingdon, Abingdon",
    "merchantCategoryCode": "5411",
    "internalTransactionId": "d11349f569ab23b9db82629d21e61512",
    "bank": "BARCLAYS_BUKBGB22",
    "accountNumber": "************7005",
    "accountType": "CreditCard",
  },
  {
    "bookingDate": "2025-06-02",
    "bookingDateTime": "2025-06-02T20:49:08Z",
    "transactionAmount": {
      "amount": "-0.01",
      "currency": "GBP",
    },
    "creditorName": "GOOGLE*CLOUD 22WTWW",
    "remittanceInformationUnstructured":
      "Google*cloud 22wtww, Cc google.com, 128.26 null IRELAND",
    "merchantCategoryCode": "5817",
    "internalTransactionId": "c03b9d332c007c0cdd68b8c1b3d4500d",
    "bank": "BARCLAYS_BUKBGB22",
    "accountNumber": "************7005",
    "accountType": "CreditCard",
  },
  {
    "bookingDate": "2025-06-02",
    "bookingDateTime": "2025-06-02T20:49:08Z",
    "transactionAmount": {
      "amount": "-0.48",
      "currency": "GBP",
    },
    "creditorName": "WM MORRISONS STORE",
    "remittanceInformationUnstructured": "WM Morrisons Store, Banbury",
    "merchantCategoryCode": "5411",
    "internalTransactionId": "1225db5382d902d3460c1dfb97527bca",
    "bank": "BARCLAYS_BUKBGB22",
    "accountNumber": "************7005",
    "accountType": "CreditCard",
  },
  {
    "bookingDate": "2025-06-02",
    "bookingDateTime": "2025-06-02T20:49:08Z",
    "transactionAmount": {
      "amount": "-0.81",
      "currency": "GBP",
    },
    "creditorName": "T K MAXX LTD",
    "remittanceInformationUnstructured": "T K Maxx Ltd, Banbury",
    "merchantCategoryCode": "5331",
    "internalTransactionId": "271d15e1340f3f1344999838e32c6b2a",
    "bank": "BARCLAYS_BUKBGB22",
    "accountNumber": "************7005",
    "accountType": "CreditCard",
  },
  {
    "bookingDate": "2025-06-02",
    "bookingDateTime": "2025-06-02T20:49:08Z",
    "transactionAmount": {
      "amount": "-24.95",
      "currency": "GBP",
    },
    "creditorName": "APPLE.COM/BILL",
    "remittanceInformationUnstructured":
      "Apple.com/bill, 08001076285, 249528.26 null IRELAND",
    "merchantCategoryCode": "5818",
    "internalTransactionId": "d2162bdc61ff186d821f01bc575a573f",
    "bank": "BARCLAYS_BUKBGB22",
    "accountNumber": "************7005",
    "accountType": "CreditCard",
  },
  {
    "bookingDate": "2025-06-02",
    "bookingDateTime": "2025-06-02T20:49:08Z",
    "transactionAmount": {
      "amount": "2.00",
      "currency": "GBP",
    },
    "creditorName": "TOOLSTATION UK",
    "remittanceInformationUnstructured": "Toolstation UK, Northampton",
    "merchantCategoryCode": "5251",
    "internalTransactionId": "c14f5892ffd627a6180c8e1312409b17",
    "bank": "BARCLAYS_BUKBGB22",
    "accountNumber": "************7005",
    "accountType": "CreditCard",
  },
  {
    "bookingDate": "2025-06-02",
    "bookingDateTime": "2025-06-02T20:49:08Z",
    "transactionAmount": {
      "amount": "4.64",
      "currency": "GBP",
    },
    "creditorName": "TOOLSTATION UK",
    "remittanceInformationUnstructured": "Toolstation UK, Northampton",
    "merchantCategoryCode": "5251",
    "internalTransactionId": "7501c63fcb10d8642f85c22d00086297",
    "bank": "BARCLAYS_BUKBGB22",
    "accountNumber": "************7005",
    "accountType": "CreditCard",
  },
  {
    "bookingDate": "2025-06-02",
    "bookingDateTime": "2025-06-02T20:49:08Z",
    "transactionAmount": {
      "amount": "12.43",
      "currency": "GBP",
    },
    "creditorName": "TOOLSTATION UK",
    "remittanceInformationUnstructured": "Toolstation UK, Northampton",
    "merchantCategoryCode": "5251",
    "internalTransactionId": "1502bfffed59f1ee06c9d0c2be5d6b27",
    "bank": "BARCLAYS_BUKBGB22",
    "accountNumber": "************7005",
    "accountType": "CreditCard",
  },
  {
    "bookingDate": "2025-06-02",
    "bookingDateTime": "2025-06-02T20:49:08Z",
    "transactionAmount": {
      "amount": "-11.99",
      "currency": "GBP",
    },
    "creditorName": "TOOLSTATION UK",
    "remittanceInformationUnstructured": "Toolstation UK, Northampton",
    "merchantCategoryCode": "5251",
    "internalTransactionId": "eb340fc4adac16fe179513d6166ed98a",
    "bank": "BARCLAYS_BUKBGB22",
    "accountNumber": "************7005",
    "accountType": "CreditCard",
  },
  {
    "bookingDate": "2025-06-02",
    "bookingDateTime": "2025-06-02T20:49:08Z",
    "transactionAmount": {
      "amount": "-7.86",
      "currency": "GBP",
    },
    "creditorName": "AMZNMktplace*MF7XV8965",
    "remittanceInformationUnstructured": "Amznmktplace*mf7xv8965, amazon.co.uk",
    "merchantCategoryCode": "5999",
    "internalTransactionId": "f326f58fbc26f3d449fcb0bd66928832",
    "bank": "BARCLAYS_BUKBGB22",
    "accountNumber": "************7005",
    "accountType": "CreditCard",
  },
  {
    "bookingDate": "2025-06-23",
    "valueDate": "2025-06-23",
    "bookingDateTime": "2025-06-23T01:00:00+01:00",
    "valueDateTime": "2025-06-23T00:02:28.050+01:00",
    "transactionAmount": {
      "amount": "-572.48",
      "currency": "GBP",
    },
    "creditorName": "Barclaycard",
    "remittanceInformationUnstructured": "B/CARD AVIOS  5301210200657005 DDR",
    "internalTransactionId": "d7cb72b127944b8ce6e6a1b1b5f2a194",
    "bank": "BARCLAYS_BUKBGB22",
    "accountNumber": "53631052",
    "accountType": "Saving",
  },
  {
    "bookingDate": "2025-06-18",
    "valueDate": "2025-06-18",
    "bookingDateTime": "2025-06-18T01:00:00+01:00",
    "valueDateTime": "2025-06-18T00:02:04.220+01:00",
    "transactionAmount": {
      "amount": "-19.50",
      "currency": "GBP",
    },
    "remittanceInformationUnstructured": "PETSAPP  DXYSKECOJVRYIFXRSD DDR",
    "internalTransactionId": "e55538994ef5211d184d8d01bc33e3f1",
    "bank": "BARCLAYS_BUKBGB22",
    "accountNumber": "53631052",
    "accountType": "Saving",
  },
  {
    "bookingDate": "2025-06-18",
    "valueDate": "2025-06-18",
    "bookingDateTime": "2025-06-18T01:00:00+01:00",
    "valueDateTime": "2025-06-18T00:02:04.220+01:00",
    "transactionAmount": {
      "amount": "-19.50",
      "currency": "GBP",
    },
    "remittanceInformationUnstructured": "PETSAPP  Y1XH8OVTDUG3CMONMS DDR",
    "internalTransactionId": "a641882d57054ae7ff69797d018dc0c1",
    "bank": "BARCLAYS_BUKBGB22",
    "accountNumber": "53631052",
    "accountType": "Saving",
  },
  {
    "bookingDate": "2025-06-18",
    "valueDate": "2025-06-18",
    "bookingDateTime": "2025-06-18T01:00:00+01:00",
    "valueDateTime": "2025-06-18T00:02:04.220+01:00",
    "transactionAmount": {
      "amount": "-19.50",
      "currency": "GBP",
    },
    "remittanceInformationUnstructured": "PETSAPP  PLCDNBPEANJ6BOFBZX DDR",
    "internalTransactionId": "a949c2429cfebc9ba7b78150b7c71273",
    "bank": "BARCLAYS_BUKBGB22",
    "accountNumber": "53631052",
    "accountType": "Saving",
  },
  {
    "bookingDate": "2025-06-16",
    "valueDate": "2025-06-14",
    "bookingDateTime": "2025-06-16T01:00:00+01:00",
    "valueDateTime": "2025-06-14T20:18:54.620+01:00",
    "transactionAmount": {
      "amount": "-1800.00",
      "currency": "GBP",
    },
    "creditorName": "KONG CHOR NG  PAYBACK",
    "remittanceInformationUnstructured": "KONG CHOR NG  PAYBACK FT",
    "internalTransactionId": "66d6e39d106cbbbd53697ca8406b3f70",
    "bank": "BARCLAYS_BUKBGB22",
    "accountNumber": "53631052",
    "accountType": "Saving",
  },
  {
    "bookingDate": "2025-06-16",
    "valueDate": "2025-06-14",
    "bookingDateTime": "2025-06-16T01:00:00+01:00",
    "valueDateTime": "2025-06-14T20:18:31.370+01:00",
    "transactionAmount": {
      "amount": "4000.00",
      "currency": "GBP",
    },
    "creditorName": "204639 93991989  MOBILE-CHANNEL",
    "remittanceInformationUnstructured": "204639 93991989  MOBILE-CHANNEL FT",
    "internalTransactionId": "1bfc5121e51a8302750d1c8c82fe9e66",
    "bank": "BARCLAYS_BUKBGB22",
    "accountNumber": "53631052",
    "accountType": "Saving",
  },
];

Deno.test("Sort the transaction", () => {
  const statements = fromTransactions(mockTransactions);
  for (let i = 1; i < statements.transactions.length; i++) {
    assertEquals(
      new Date(statements.transactions[i].bookingDate).getTime() >=
        new Date(statements.transactions[i - 1].bookingDate).getTime(),
      true,
      `Statements are not sorted by booking date at index ${i}`,
    );
  }
});

Deno.test("Sum of transaction amount", () => {
  assertEquals(fromTransactions(mockTransactions).info.sum, "1251.77");
});

Deno.test("Transaction have to field indicate where the money go", () => {
  fromTransactions(mockTransactions).transactions.forEach((transaction) => {
    assertExists(transaction.to, "Missing 'to' field for transaction.");
  });
});
